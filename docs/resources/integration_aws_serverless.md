---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "mondoo_integration_aws_serverless Resource - terraform-provider-mondoo"
subcategory: ""
description: |-
  Continuously scan AWS organization and accounts for misconfigurations and vulnerabilities.
---

# mondoo_integration_aws_serverless (Resource)

Continuously scan AWS organization and accounts for misconfigurations and vulnerabilities.

## Example Usage

```terraform
variable "origin_aws_account" {
  description = "Origin AWS Account"
  type        = string
  default     = "764453172858"
}

variable "mondoo_sns_handler" {
  description = "Mondoo SNS Handler"
  type        = string
  default     = "https://api.mondoo.com/AWS/SNSEventHandler"
}

variable "aws_region" {
  description = "AWS Region"
  type        = string
  default     = "us-east-1"
}

variable "aws_account_id" {
  description = "value of the AWS account ID"
  type        = string
}

provider "mondoo" {
  space = "hungry-poet-123456"
}

provider "aws" {
  region = var.aws_region
}

data "aws_region" "current" {}

# Setup the AWS integration
resource "mondoo_integration_aws_serverless" "aws_serverless" {
  name                          = "AWS Integration"
  region                        = data.aws_region.current.name
  is_organization               = false
  console_sign_in_trigger       = true
  instance_state_change_trigger = true
  account_ids                   = [var.aws_account_id]
  scan_configuration = {
    ec2_scan           = true
    ecr_scan           = false
    ecs_scan           = false
    cron_scan_in_hours = 24
    ec2_scan_options = {
      ssm             = true
      ebs_volume_scan = true
      ebs_scan_options = {
        target_instances_per_scanner = 5
        max_asg_instances            = 10
      }
      instance_connect = false
    }
  }
}

# for single account deploys
resource "aws_cloudformation_stack" "mondoo_stack" {
  name         = "mondoo-stack"
  template_url = "https://s3.amazonaws.com/mondoo.${data.aws_region.current.name}/mondoo-root-cf.json"
  capabilities = ["CAPABILITY_NAMED_IAM"]
  parameters = {
    MondooIntegrationMrn = mondoo_integration_aws_serverless.aws_serverless.mrn
    MondooToken          = mondoo_integration_aws_serverless.aws_serverless.token
    OriginAwsAccount     = var.origin_aws_account
    MondooSnsHandler     = var.mondoo_sns_handler
  }
}

# for organization wide deployments use aws_cloudformation_stack_set and aws_cloudformation_stack_set_instance instead of aws_cloudformation_stack
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudformation_stack_set
# https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/cloudformation_stack_set_instance
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `name` (String) Name of the integration.
- `region` (String) AWS region.
- `scan_configuration` (Attributes) (see [below for nested schema](#nestedatt--scan_configuration))

### Optional

- `account_ids` (List of String) List of AWS account IDs.
- `console_sign_in_trigger` (Boolean) Enable console sign in trigger.
- `instance_state_change_trigger` (Boolean) Enable instance state change trigger.
- `is_organization` (Boolean) Is organization.
- `space_id` (String) Mondoo Space Identifier. If it is not provided, the provider space is used.

### Read-Only

- `mrn` (String) Integration identifier
- `token` (String) Integration token

<a id="nestedatt--scan_configuration"></a>
### Nested Schema for `scan_configuration`

Required:

- `ec2_scan_options` (Attributes) (see [below for nested schema](#nestedatt--scan_configuration--ec2_scan_options))

Optional:

- `cron_scan_in_hours` (Number) Cron scan in hours.
- `ec2_scan` (Boolean) Enable EC2 scan.
- `ecr_scan` (Boolean) Enable ECR scan.
- `ecs_scan` (Boolean) Enable ECS scan.
- `event_scan_triggers` (Attributes) (see [below for nested schema](#nestedatt--scan_configuration--event_scan_triggers))
- `vpc_configuration` (Attributes) (see [below for nested schema](#nestedatt--scan_configuration--vpc_configuration))

<a id="nestedatt--scan_configuration--ec2_scan_options"></a>
### Nested Schema for `scan_configuration.ec2_scan_options`

Optional:

- `ebs_scan_options` (Attributes, Deprecated) (see [below for nested schema](#nestedatt--scan_configuration--ec2_scan_options--ebs_scan_options))
- `ebs_volume_scan` (Boolean) Enable EBS volume scan.
- `exclude_instance_ids_filter` (List of String) List of instance IDs to exclude.
- `exclude_regions_filter` (List of String) List of regions to exclude.
- `exclude_tags_filter` (Map of String) Excluded Tags filter.
- `instance_connect` (Boolean) Enable instance connect.
- `instance_ids_filter` (List of String) List of instance IDs filter.
- `regions_filter` (List of String) List of regions filter.
- `ssm` (Boolean) Enable SSM.
- `tags_filter` (Map of String) Tags filter.

<a id="nestedatt--scan_configuration--ec2_scan_options--ebs_scan_options"></a>
### Nested Schema for `scan_configuration.ec2_scan_options.ebs_scan_options`

Optional:

- `max_asg_instances` (Number, Deprecated) Max ASG instances.
- `target_instances_per_scanner` (Number, Deprecated) Target instances per scanner.



<a id="nestedatt--scan_configuration--event_scan_triggers"></a>
### Nested Schema for `scan_configuration.event_scan_triggers`

Optional:

- `event_detail_type` (String) Event detail type.
- `event_source` (String) Event source.
- `scan_type` (String) Scan type.


<a id="nestedatt--scan_configuration--vpc_configuration"></a>
### Nested Schema for `scan_configuration.vpc_configuration`

Optional:

- `cidr_block` (String) CIDR block for the Mondoo VPC.
- `use_mondoo_vpc` (Boolean) Use Mondoo VPC.
